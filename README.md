# USBload
Dummy USB load

![usbload](https://user-images.githubusercontent.com/10735253/46649043-82090500-cbd2-11e8-8a2e-10b9c3b0a5ba.jpg)

## これは何？
マイコンボードやLEDなどをモバイルバッテリーで駆動させるとき、急に電源が切れてしまうことはありませんか？
大抵のモバイルバッテリーは消費電流が弱い時にスリープするようになっています。

本モジュールをモバイルバッテリーに取り付けることで、定期的に負荷電流を流すことで、モバイルバッテリーをスリープさせないようにすることができます。

本モジュールは間欠で電流を流すことで、モバイルバッテリーの動作時間により影響を与えないようにしました。
また、端子を結線することで、消費電流値と電流の間欠期間を設定できます。
それにより、使用するモバイルバッテリーの挙動に合わせ、動作を調整することができます。

## USBloadとUSBload2の違い
モバイルバッテリーによってオス側が差し込めないものがあるとのご意見を戴き、USBload2はAタイプのオスコネクタをつけました。

![usbload2](https://user-images.githubusercontent.com/10735253/86889670-181ae800-c137-11ea-87fa-b8d8b5a2260b.jpg)

## 使い方
モバイルバッテリーに本モジュールのオス側を差し込み、メスコネクタに給電用USBケーブルを差し込むだけです。

※使用するモバイルバッテリーにあわせて、以下の「設定」を行う必要があります。

## 設定

### 電流間欠期間の設定方法

本モジュールを接続しない状態で、モバイルバッテリーをONにし、その後、自動的にスリープに入る（給電が止まる）までの時間を計測します。その時間に応じて、以下のとおり間欠期間を設定します。

間欠期間は、上記画像の赤色のA,Bパターンをショートすることで設定できます。

|A|B|間欠期間|補足|
|----|----|----|----|
|オープン|オープン|約24秒|30秒でスリープするモバイルバッテリー向け|
|ショート|オープン|約16秒|20秒でスリープするモバイルバッテリー向け|
|オープン|ショート|約12秒|15秒でスリープするモバイルバッテリー向け|
|ショート|ショート|約8秒|10秒でスリープするモバイルバッテリー向け|

### 消費電流値の設定方法
デフォルトで100mA流れるようになっており、上記画像の青色のパターンを1つショートするごとに電流値が100mA増えます。
多くのモバイルバッテリーは100mAのままでスリープを回避できるようですが、より多くの電流が必要なものもありますので、100mAのままではスリープを回避できない場合は、順に流す電流を増やしてください、

## その他
サイズ(USBload) : 18×12×10.5mm
サイズ(USBload2) : 35.6×17×11mm
モジュールの消費電流値 : 100mA～400mA  
モジュールの電流増減インターバル : 約10～30秒  

## （自作する人向け）設計データ・ファームウエア
ATtiny10の書き込みは以下を参照。
https://make.kosakalab.com/make/electronic-work/arduino-ide-dev/

## 終わりに

USBloadの改良点がありましたら、ぜひIsuuesに書いてください。
こんな作品に作ったよ！という方は [#USBload](https://twitter.com/search?q=%23USBload&src=typed_query) を付けてSNSなどで公開してくださると嬉しいです。
